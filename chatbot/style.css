:root{
  --bg:#0f1724; --card:#0b1220; --accent:#7c3aed; --muted:#94a3b8; --text:#e6eef8;
  --composer-height:72px; /* height reserved for bottom composer */
  --sidebar-width: 260px;
  --header-height: 64px;
}
*{box-sizing:border-box;font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;}
body{margin:0;background:linear-gradient(180deg,#071129 0%, #061027 100%);color:var(--text);height:100vh;display:flex;align-items:center;justify-content:center;}
.app{
  width:100%;height:100vh;
  display:flex;
  flex-direction:row;
  background:var(--bg);
  overflow:hidden;
}

/* keep header visible while scrolling messages */
.app-header{
  height:var(--header-height);
  padding:0 24px;
  background:rgba(255,255,255,0.03);
  backdrop-filter:blur(10px);
  display:flex;justify-content:space-between;align-items:center;
  border-bottom:1px solid rgba(255,255,255,0.03);
  position:relative;
  width:auto;
  left:auto;
  right:auto;
  z-index: 100;
  padding:1rem;
  box-shadow:0 2px 4px rgba(0,0,0,0.1);
}
.brand{font-weight:600;font-size:18px;color:var(--accent);}
.controls{display:flex;gap:8px;align-items:center;}
.controls input{background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);padding:8px 10px;border-radius:8px;color:var(--text);width:260px;}
.controls button{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer;}
.chat{flex:1;display:flex;flex-direction:column;height:calc(100vh - var(--header-height));position:relative;overflow:hidden;}
.messages{
  flex:1;
  /* allow the flex child to shrink so overflow works correctly in modern browsers */
  min-height: 0;
  overflow-y:auto;
  padding:24px;
  margin-bottom:var(--composer-height);
  gap:16px;
  scroll-behavior:smooth;
}
.msg{max-width:85%;margin-bottom:16px;padding:16px;border-radius:12px;transition:all 0.2s ease;}
.msg:hover{transform:translateY(-1px);box-shadow:0 4px 20px rgba(0,0,0,0.2);}
.msg.user{margin-left:auto;background:linear-gradient(90deg, rgba(124,58,237,0.14), rgba(124,58,237,0.08));border:1px solid rgba(124,58,237,0.16);}
.msg.bot{margin-right:auto;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);color:var(--text);}
.meta{font-size:12px;color:var(--muted);margin-bottom:6px;}
.composer{
  display:flex;gap:8px;padding:16px 24px;
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  z-index: 14;
  height: var(--composer-height);
  background:rgba(11,18,32,0.8);
  backdrop-filter:blur(10px);
  border-top:1px solid rgba(255,255,255,0.05);
  align-items:center;
}
.composer input[type="text"], .composer input[id="query"]{flex:1;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;color:var(--text);min-width:0;}
.composer button{padding:10px 14px;border-radius:10px;border:none;background:var(--accent);color:white;cursor:pointer;}
.file-btn{display:inline-flex;align-items:center;justify-content:center;padding:8px;border-radius:8px;background:rgba(255,255,255,0.02);cursor:pointer;}
.file-btn input{display:none;}
.small{font-size:12px;color:var(--muted);}
/* ensure message content wraps and doesn't force oversized layout */
.msg .content {
  white-space: pre-wrap;        /* preserve line breaks but wrap long lines */
  word-break: break-word;
  overflow-wrap: anywhere;
  max-width: 100%;
  /* limit very tall single-message growth; allow internal scroll if needed */
  max-height: 60vh;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

/* optional: make scrollbar subtle on WebKit */
.messages::-webkit-scrollbar { height: 8px; width: 8px; }
.messages::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.06); border-radius: 8px; }

.sidebar {
    width: var(--sidebar-width);
    background: rgba(11,18,32,0.6);
    backdrop-filter: blur(10px);
    border-right: 1px solid rgba(255,255,255,0.05);
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
}

.sidebar-header {
    height: var(--header-height);
    padding: 0 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(255,255,255,0.02);
}

.start-over {
    background: rgba(124,58,237,0.1);
    color: var(--accent);
    border: 1px solid rgba(124,58,237,0.2);
    padding: 8px;
    border-radius: 8px;
    cursor: pointer;
    width: 100%;
}

.history-list {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

/* Scrollbar styling */
::-webkit-scrollbar {
    width: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.1);
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.2);
}

.history-item {
    padding: 12px;
    margin: 4px 0;
    border-radius: 8px;
    cursor: pointer;
    color: var(--muted);
    transition: all 0.2s ease;
    font-size: 14px;
    border: 1px solid transparent;
}

.history-item:hover {
    background: rgba(255,255,255,0.03);
    color: var(--text);
}

.history-item.active {
    background: rgba(124,58,237,0.1);
    border-color: rgba(124,58,237,0.2);
    color: var(--text);
}

.history-preview {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
